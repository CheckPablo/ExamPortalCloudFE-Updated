"use strict";(self.webpackChunkmodern_admin=self.webpackChunkmodern_admin||[]).push([[25],{13602:(T,f,a)=>{a.d(f,{P:()=>v});var g=a(22844),m=a(19212),s=a(69862);let v=(()=>{class p extends g.s{constructor(_){super(_,"Grades"),this.http=_,this.getGradesByCenter=u=>this.getUrl(`getByCenterId/${u}`)}static#e=this.\u0275fac=function(u){return new(u||p)(m.LFG(s.eN))};static#t=this.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},17127:(T,f,a)=>{a.r(f),a.d(f,{GradesModule:()=>j});var g=a(96814),m=a(12236),s=a(60095),v=a(96425),p=a(5178),b=a(46707),_=a.n(b),u=a(30912),e=a(19212),Z=a(12746),G=a(13602),S=a(1026),x=a(3193);let A=(()=>{class i{transform(t,o){return o&&0!==o.length&&0!==t.length?t.filter(n=>{const r=-1!==n.code.toLowerCase().indexOf(o.toLowerCase()),c=-1!==n.description.toLowerCase().indexOf(o.toLowerCase());if(r||c)return n}):t}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275pipe=e.Yjl({name:"gradeSort",type:i,pure:!0})}return i})();function q(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"tr",33),e.NdJ("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(),l=e.MAs(56);return e.KtG(c.openUpdateModal(l,r))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onDeleteGrade(r))}),e._uU(7," Delete "),e.qZA()()()}if(2&i){const t=d.$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.description)}}function U(i,d){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(),e.hij("",t.paginationService.searchTotal," search results from ")}}const J=i=>({active:i});function L(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"li",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.paginationService.setPage(r))}),e.TgZ(1,"a",47),e._uU(2),e.qZA()()}if(2&i){const t=d.$implicit,o=e.oxw(2);e.Q6J("ngClass",e.VKq(2,J,o.paginationService.currentPage==t)),e.xp6(2),e.hij(" ",t," ")}}const h=i=>({disabled:i});function M(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",36)(2,"div",37),e._uU(3),e.YNc(4,U,2,1,"span",38),e._uU(5),e.qZA()(),e.TgZ(6,"div",36)(7,"div",39)(8,"ul",40)(9,"li",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.paginationService.setPage(1))}),e.TgZ(10,"a",42)(11,"span",43),e._uU(12,"\xab\xab"),e.qZA()()(),e.TgZ(13,"li",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.paginationService.goToPreviousPage())}),e.TgZ(14,"a",42)(15,"span",43),e._uU(16,"\xab"),e.qZA()()(),e.YNc(17,L,3,4,"li",44),e.TgZ(18,"li",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.paginationService.goToNextPage())}),e.TgZ(19,"a",45)(20,"span",43),e._uU(21,"\xbb"),e.qZA()()(),e.TgZ(22,"li",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.paginationService.setPage(n.paginationService.totalPages))}),e.TgZ(23,"a",45)(24,"span",43),e._uU(25,"\xbb\xbb"),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.AsE("Showing ",t.paginationService.startIndex," to ",t.paginationService.endIndex," of "),e.xp6(),e.Q6J("ngIf",t.paginationService.searchTerm),e.xp6(),e.hij(" ",t.paginationService.totalItems," entries "),e.xp6(4),e.Q6J("ngClass",e.VKq(9,h,1==t.paginationService.currentPage)),e.xp6(4),e.Q6J("ngClass",e.VKq(11,h,1==t.paginationService.currentPage)),e.xp6(4),e.Q6J("ngForOf",t.paginationService.paginationLinks),e.xp6(),e.Q6J("ngClass",e.VKq(13,h,t.paginationService.currentPage==t.paginationService.totalPages)),e.xp6(4),e.Q6J("ngClass",e.VKq(15,h,t.paginationService.currentPage==t.paginationService.totalPages))}}function k(i,d){1&i&&e._UZ(0,"i",66)}function y(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1,"Code is required"),e.qZA())}function N(i,d){if(1&i&&(e.TgZ(0,"div",67),e.YNc(1,y,2,0,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.f.code.errors.required)}}function w(i,d){1&i&&e._UZ(0,"i",66)}function I(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1,"Description is required"),e.qZA())}function Q(i,d){if(1&i&&(e.TgZ(0,"div",67),e.YNc(1,I,2,0,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.f.description.errors.required)}}const C=i=>({"is-invalid":i});function D(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"h4",49),e._uU(2,"Grade Maintenance"),e.qZA(),e.TgZ(3,"button",50),e.NdJ("click",function(){const r=e.CHM(t).dismiss;return e.KtG(r("Cross click"))}),e.qZA()(),e.TgZ(4,"form",51),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(5,"div",52)(6,"div",2),e._UZ(7,"input",53),e.qZA(),e.TgZ(8,"div",2)(9,"div",54)(10,"div",55)(11,"label",56),e._uU(12," Grade Code: "),e.YNc(13,k,1,0,"i",57),e.qZA(),e.TgZ(14,"div",58),e._UZ(15,"input",59),e.YNc(16,N,2,1,"div",60),e.qZA()()()(),e.TgZ(17,"div",2)(18,"div",54)(19,"div",55)(20,"label",61),e._uU(21," Grade Description: "),e.YNc(22,w,1,0,"i",57),e.qZA(),e.TgZ(23,"div",58),e._UZ(24,"input",62),e.YNc(25,Q,2,1,"div",60),e.qZA()()()()(),e.TgZ(26,"div",63)(27,"button",64),e.NdJ("click",function(){const r=e.CHM(t).dismiss;return e.KtG(r("Close modal"))}),e._uU(28," Close "),e.qZA(),e.TgZ(29,"button",65),e._uU(30," Save changes "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(9),e.Q6J("ngIf",t.f.code.errors&&t.f.code.errors.required),e.xp6(2),e.Q6J("ngClass",e.VKq(7,C,t.submitted&&t.f.code.errors)),e.xp6(),e.Q6J("ngIf",t.submitted&&t.f.code.errors),e.xp6(6),e.Q6J("ngIf",t.f.description.errors&&t.f.description.errors.required),e.xp6(2),e.Q6J("ngClass",e.VKq(9,C,t.submitted&&t.f.description.errors)),e.xp6(),e.Q6J("ngIf",t.submitted&&t.f.description.errors)}}function F(i,d){1&i&&e._UZ(0,"i",66)}function Y(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1,"Code is required"),e.qZA())}function K(i,d){if(1&i&&(e.TgZ(0,"div",67),e.YNc(1,Y,2,0,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.f.code.errors.required)}}function B(i,d){1&i&&e._UZ(0,"i",66)}function P(i,d){1&i&&(e.TgZ(0,"div"),e._uU(1,"Description is required"),e.qZA())}function E(i,d){if(1&i&&(e.TgZ(0,"div",67),e.YNc(1,P,2,0,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(),e.Q6J("ngIf",t.f.description.errors.required)}}function O(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"h4",49),e._uU(2,"Grade Maintenance"),e.qZA(),e.TgZ(3,"button",50),e.NdJ("click",function(){const r=e.CHM(t).dismiss;return e.KtG(r("Cross click"))}),e.qZA()(),e.TgZ(4,"form",51),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onEditSubmit())}),e.TgZ(5,"div",52)(6,"div",2),e._UZ(7,"input",53),e.qZA(),e.TgZ(8,"div",2)(9,"div",54)(10,"div",55)(11,"label",56),e._uU(12," Grade Code: "),e.YNc(13,F,1,0,"i",57),e.qZA(),e.TgZ(14,"div",58),e._UZ(15,"input",59),e.YNc(16,K,2,1,"div",60),e.qZA()()()(),e.TgZ(17,"div",2)(18,"div",54)(19,"div",55)(20,"label",61),e._uU(21," Grade Description: "),e.YNc(22,B,1,0,"i",57),e.qZA(),e.TgZ(23,"div",58),e._UZ(24,"input",62),e.YNc(25,E,2,1,"div",60),e.qZA()()()()(),e.TgZ(26,"div",63)(27,"button",64),e.NdJ("click",function(){const r=e.CHM(t).dismiss;return e.KtG(r("Close modal"))}),e._uU(28," Close "),e.qZA(),e.TgZ(29,"button",65),e._uU(30," Save changes "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(9),e.Q6J("ngIf",t.f.code.errors&&t.f.code.errors.required),e.xp6(2),e.Q6J("ngClass",e.VKq(7,C,t.submitted&&t.f.code.errors)),e.xp6(),e.Q6J("ngIf",t.submitted&&t.f.code.errors),e.xp6(6),e.Q6J("ngIf",t.f.description.errors&&t.f.description.errors.required),e.xp6(2),e.Q6J("ngClass",e.VKq(9,C,t.submitted&&t.f.description.errors)),e.xp6(),e.Q6J("ngIf",t.submitted&&t.f.description.errors)}}const H=[{path:"",component:(()=>{class i{constructor(t,o,n,r,c){this.service=t,this.modalService=o,this.gradeService=n,this.formBuilder=r,this.paginationService=c,this.grades=[],this.isAllSelected=!1,this.isPageLoaded=!1,this.submitted=!1,this.loading=!1}ngOnInit(){this.paginationService.setData([]),this.getGrades(),this.initForms()}get f(){return this.form.controls}getGrades(){this.gradeService.get().subscribe(t=>{this.grades=t,this.paginationService.setData(t),this.paginationService.onSearchInputChange(""),this.TableData=t})}initEditForms(t){this.form=this.formBuilder.group({id:[t.id,[s.kI.required]],code:[t.code,[s.kI.required]],description:[t.description,[s.kI.required]]}),this.submitted=!1}initForms(){this.paginationService.setData([]),this.form=this.formBuilder.group({code:["",[s.kI.required]],description:["",[s.kI.required]]}),this.submitted=!1}onDeleteGrade(t){_().fire({title:"Are you sure you want to delete this grade?",text:"This will also delete any subjects and students linked to this grade.",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(o=>{o.value&&this.gradeService.delete(t.id).subscribe(()=>{this.getGrades(),_().fire("Grade Deleted","Grade deleted successfully.","success")})})}onEditSubmit(){this.submitted=!0,!this.form.invalid&&this.gradeService.update(this.f.id.value,this.form.value).subscribe(()=>{this.getGrades(),this.initForms(),this.modalService.dismissAll(),_().fire("Grade Updated","Grade information updated.","success")})}onSort({column:t,direction:o}){if(this.headers.forEach(n=>{n.sortable!==t&&(n.direction="")}),""===o||""===t)this.paginationService.paginatedData=this.paginationService.paginatedData;else{const n=this.paginationService.paginatedData.sort((r,c)=>{const l=(0,u.q)(r[t],c[t]);return"asc"===o?l:-l});this.paginationService.paginatedData=[...n]}}onSubmit(){this.submitted=!0,!this.form.invalid&&this.gradeService.create(this.form.value).subscribe({next:t=>{console.log(t),this.getGrades(),this.initForms(),this.modalService.dismissAll(),_().fire("Grade Saved","Grade information saved. You may capture a new grade.","success")},error:t=>{console.log(t),this.title="Add grade unsuccessful",this.message="Grade Already Exists",this.showModal=!0},complete:()=>{}})}openUpdateModal(t,o){this.initEditForms(o),this.modalService.open(t,p.U.lg)}openModal(t){this.form.reset(),this.modalService.open(t,p.U.lg)}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.w),e.Y36(Z.FF),e.Y36(G.P),e.Y36(s.QS),e.Y36(S.N))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-grades"]],viewQuery:function(o,n){if(1&o&&e.Gf(u.e,5),2&o){let r;e.iGM(r=e.CRH())&&(n.headers=r)}},features:[e._Bn([v.w,g.JJ])],decls:58,vars:14,consts:[[1,"content-body"],["id","horizontal-form-layouts"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-content","collpase","show"],[1,"card-body"],[1,"form","form-horizontal"],[1,"form-body"],[1,"form-section"],[1,"la","la-eye"],[1,"col-md-2"],[1,"form-group"],["type","button",1,"btn","btn-info","btn-min-width","mr-1","mb-1",3,"click"],[1,"row","mb-md-2"],[1,"col-sm-12","col-md-6"],["id","tickets-table_length",1,"dataTables_length"],[1,"d-inline-flex","align-items-center"],["name","tickets-table_length","aria-controls","tickets-table","name","pageSize",1,"form-control","form-control-sm","mx-2",3,"ngModel","ngModelChange"],[3,"ngValue"],["id","tickets-table_filter",1,"dataTables_filter","text-md-end"],["type","text","name","searchTerm","aria-controls","tickets-table",1,"form-control","form-control-sm","ms-2",3,"ngModel","ngModelChange","input"],[1,"table-responsive"],["source","",1,"table","table-striped","table-bordered","no-footer","dataTable"],[1,"bg-info","white"],["scope","col","sortable","code",3,"sort"],[1,"la","la-sort","float-md-end"],["scope","col","sortable","description",3,"sort"],[3,"dblclick",4,"ngFor","ngForOf"],["class","row justify-content-md-between align-items-md-center mt-2",4,"ngIf"],["addGradeModal",""],["editGradeModal",""],[3,"content","title","show"],[3,"dblclick"],["id","btnDeleteGrade","type","button",1,"btn","btn-block","btn-primary","glow",2,"width","100px",3,"click"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[4,"ngIf"],[1,"text-md-right","float-md-end","pagination-rounded"],[1,"pagination"],[1,"page-item","ng-star-inserted",3,"ngClass","click"],["aria-label","Previous","href","javascript:void(0);",1,"page-link"],["aria-hidden","true",1,"ng-star-inserted"],["class","page-item ng-star-inserted","aria-current","page",3,"ngClass","click",4,"ngFor","ngForOf"],["aria-label","Next","href","javascript:void(0);",1,"page-link"],["aria-current","page",1,"page-item","ng-star-inserted",3,"ngClass","click"],["href","javascript:void(0);",1,"page-link","ng-star-inserted"],[1,"modal-header"],["id","myModalLabel1",1,"modal-title"],["type","button","aria-hidden","true",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],["type","hidden","id","GradeID",1,"form-control"],[1,"col-lg-12"],[1,"form-group","row"],["for","code","data-toggle","tooltip","title","Code",1,"col-md-3","label-control"],["class","fa fa-asterisk text-danger",4,"ngIf"],[1,"col-md-9","mx-auto"],["type","text","id","code","name","code","placeholder","Enter the Code","formControlName","code","maxlength","8",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description","data-toggle","tooltip","title","Code",1,"col-md-3","label-control"],["type","text","id","description","name","description","placeholder","Enter the Description","formControlName","description","maxlength","50",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","button","ngbAutofocus","",1,"btn","grey","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-outline-primary"],[1,"fa","fa-asterisk","text-danger"],[1,"invalid-feedback"]],template:function(o,n){if(1&o){const r=e.EpF();e.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"div",8)(9,"h4",9),e._UZ(10,"i",10),e._uU(11,"View Grades"),e.qZA(),e.TgZ(12,"div",2)(13,"div",11)(14,"div",12)(15,"button",13),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(54);return e.KtG(n.openModal(l))}),e._uU(16," Add New "),e.qZA()()()(),e.TgZ(17,"div",14)(18,"div",15)(19,"div",16)(20,"label",17),e._uU(21," Show "),e.TgZ(22,"select",18),e.NdJ("ngModelChange",function(l){return n.paginationService.pageSize=l})("ngModelChange",function(l){return n.paginationService.setPageSize(l)}),e.TgZ(23,"option",19),e._uU(24,"10"),e.qZA(),e.TgZ(25,"option",19),e._uU(26,"25"),e.qZA(),e.TgZ(27,"option",19),e._uU(28,"50"),e.qZA(),e.TgZ(29,"option",19),e._uU(30,"100"),e.qZA()(),e._uU(31," entries "),e.qZA()()(),e.TgZ(32,"div",15)(33,"div",20)(34,"label",17),e._uU(35," Search: "),e.TgZ(36,"input",21),e.NdJ("ngModelChange",function(l){return n.paginationService.searchTerm=l})("input",function(l){return n.paginationService.onSearchInputChange(l.target.value)}),e.qZA()()()()(),e.TgZ(37,"div",22)(38,"table",23)(39,"thead",24)(40,"tr")(41,"th",25),e.NdJ("sort",function(l){return n.onSort(l)}),e._uU(42," code "),e._UZ(43,"i",26),e.qZA(),e.TgZ(44,"th",27),e.NdJ("sort",function(l){return n.onSort(l)}),e._uU(45," description "),e._UZ(46,"i",26),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Delete Grade"),e.qZA()()(),e.TgZ(49,"tbody"),e.YNc(50,q,8,2,"tr",28),e.ALo(51,"gradeSort"),e.qZA()()(),e.YNc(52,M,26,17,"div",29),e.qZA()()()()()()()()(),e.YNc(53,D,31,11,"ng-template",null,30,e.W1O)(55,O,31,11,"ng-template",null,31,e.W1O),e._UZ(57,"app-pop-up",32)}2&o&&(e.xp6(22),e.Q6J("ngModel",n.paginationService.pageSize),e.xp6(),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(7),e.Q6J("ngModel",n.paginationService.searchTerm),e.xp6(14),e.Q6J("ngForOf",e.xi3(51,11,n.paginationService.paginatedData,n.filter)),e.xp6(2),e.Q6J("ngIf",n.paginationService.totalItems),e.xp6(5),e.s9C("content",n.message),e.s9C("title",n.title),e.s9C("show",n.showModal))},dependencies:[g.mk,g.sg,g.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.nD,s.On,s.F,s.sg,s.u,x.s,A]})}return i})()}];let V=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(H),m.Bz]})}return i})(),j=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[g.ez,s.u5,Z.jF,Z._h,s.UX,V,x.s]})}return i})()}}]);